<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Blog Posts - Tian</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body>
        <!-- Top Navigation Bar -->
        <nav class="top-navbar">
            <div class="container-fluid">
                <div class="navbar-content">
                    <div class="navbar-brand">
                        <a href="index.html">Tian / Sports Biomechanics</a>
                    </div>
                    <div class="navbar-menu">
                        <ul class="nav-links">
                            <li><a href="index.html" data-en="Home" data-zh="首页">Home</a></li>
                            <!-- 暂时隐藏的页面，保留以备后用 -->
                            <!-- <li><a href="publications.html">Publications</a></li> -->
                            <!-- <li><a href="talks.html">Talks</a></li> -->
                            <!-- <li><a href="teaching.html">Teaching</a></li> -->
                            <!-- <li><a href="portfolio.html">Portfolio</a></li> -->
                            <li><a href="blog.html" class="active" data-en="Blog Posts" data-zh="博客文章">Blog Posts</a></li>
                            <!-- <li><a href="cv.html">CV</a></li> -->
                            <li class="nav-controls">
                                <button id="theme-toggle-btn" class="control-btn theme-btn" onclick="toggleTheme()" title="Toggle Theme">
                                    <i class="fas fa-moon" id="theme-icon"></i>
                                </button>
                                <button id="lang-toggle-btn" class="control-btn lang-btn" onclick="toggleLanguage()" title="Switch Language">
                                    <span id="lang-text">中</span>
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Blog Section with Sidebar -->
        <section class="content-section active">
            <div class="container-fluid">
                <div class="row">
                    <!-- Left Sidebar Navigation -->
                    <div class="col-lg-3 blog-sidebar">
                        <div class="sidebar-content">
                            <h4>Categories</h4>
                            <ul class="category-nav">
                                <li class="category-item">
                                    <a href="#" class="category-link active" data-category="all">
                                        <i class="fas fa-list"></i> All Posts
                                    </a>
                                </li>
                                <li class="category-item">
                                    <a href="#" class="category-link" data-category="technology">
                                        <i class="fas fa-microchip"></i> Technology
                                    </a>
                                    <ul class="subcategory-nav">
                                        <li><a href="#" data-subcategory="motion-capture">Motion Capture</a></li>
                                        <li><a href="#" data-subcategory="ai-ml">AI & Machine Learning</a></li>
                                        <li><a href="#" data-subcategory="sensors">Sensors & Equipment</a></li>
                                    </ul>
                                </li>
                                <li class="category-item">
                                    <a href="#" class="category-link" data-category="research">
                                        <i class="fas fa-flask"></i> Research
                                    </a>
                                    <ul class="subcategory-nav">
                                        <li><a href="#" data-subcategory="injury-prevention">Injury Prevention</a></li>
                                        <li><a href="#" data-subcategory="performance">Performance Analysis</a></li>
                                        <li><a href="#" data-subcategory="biomechanics">Biomechanics</a></li>
                                    </ul>
                                </li>
                                <li class="category-item">
                                    <a href="#" class="category-link" data-category="sports">
                                        <i class="fas fa-running"></i> Sports Science
                                    </a>
                                    <ul class="subcategory-nav">
                                        <li><a href="#" data-subcategory="female-athletes">Female Athletes</a></li>
                                        <li><a href="#" data-subcategory="elite-sports">Elite Sports</a></li>
                                        <li><a href="#" data-subcategory="youth-sports">Youth Sports</a></li>
                                    </ul>
                                </li>
                                <li class="category-item">
                                    <a href="#" class="category-link" data-category="tutorials">
                                        <i class="fas fa-graduation-cap"></i> Tutorials
                                    </a>
                                    <ul class="subcategory-nav">
                                        <li><a href="#" data-subcategory="matlab">MATLAB</a></li>
                                        <li><a href="#" data-subcategory="python">Python</a></li>
                                        <li><a href="#" data-subcategory="statistics">Statistics</a></li>
                                    </ul>
                                </li>
                            </ul>
                            
                            <h4>Archives</h4>
                            <ul class="archive-nav">
                                <li><a href="#" data-archive="2023">2023 (12 posts)</a></li>
                                <li><a href="#" data-archive="2022">2022 (8 posts)</a></li>
                                <li><a href="#" data-archive="2021">2021 (5 posts)</a></li>
                            </ul>
                            
                            <h4>Tags</h4>
                            <div class="tag-cloud">
                                <a href="#" class="tag">biomechanics</a>
                                <a href="#" class="tag">ACL</a>
                                <a href="#" class="tag">motion-capture</a>
                                <a href="#" class="tag">AI</a>
                                <a href="#" class="tag">performance</a>
                                <a href="#" class="tag">injury</a>
                                <a href="#" class="tag">female-athletes</a>
                                <a href="#" class="tag">MATLAB</a>
                                <a href="#" class="tag">python</a>
                                <a href="#" class="tag">research</a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Main Content -->
                    <div class="col-lg-6 blog-main">
                        <div class="content-wrapper">
                            <div class="blog-header">
                                <div class="blog-title-section">
                                    <h1 class="page-title" data-en="Blog Posts" data-zh="博客文章">Blog Posts</h1>
                                    <p class="lead" data-en="Thoughts on biomechanics research, technology, and sports science." data-zh="关于生物力学研究、技术和运动科学的思考。">Thoughts on biomechanics research, technology, and sports science.</p>
                                </div>
                                <div class="blog-actions">
                                    <button class="btn btn-primary write-blog-btn" onclick="openWriteBlogModal()" data-en="Write New Post" data-zh="写新文章">
                                        <i class="fas fa-pen"></i> <span>Write New Post</span>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="blog-list" id="blog-list">
                                <div class="empty-state">
                                    <div class="empty-icon">
                                        <i class="fas fa-pen-fancy"></i>
                                    </div>
                                    <h4>No blog posts yet</h4>
                                    <p>Start writing your first blog post by clicking the "Write New Post" button above.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Sidebar -->
                    <div class="col-lg-3 blog-right-sidebar">
                        <div class="sidebar-content">
                            <!-- Current Time Widget -->
                            <div class="widget time-widget">
                                <h4><i class="fas fa-clock"></i> Current Time</h4>
                                <div class="time-display">
                                    <div class="current-time" id="current-time">--:--:--</div>
                                    <div class="current-date" id="current-date">Loading...</div>
                                    <div class="timezone" id="timezone">UTC</div>
                                </div>
                            </div>
                            
                            <!-- Calendar Widget -->
                            <div class="widget calendar-widget">
                                <h4><i class="fas fa-calendar-alt"></i> Calendar</h4>
                                <div class="calendar-container">
                                    <div class="calendar-header">
                                        <button class="calendar-nav" id="prev-month">
                                            <i class="fas fa-chevron-left"></i>
                                        </button>
                                        <span class="calendar-title" id="calendar-title">December 2023</span>
                                        <button class="calendar-nav" id="next-month">
                                            <i class="fas fa-chevron-right"></i>
                                        </button>
                                    </div>
                                    <div class="calendar-grid">
                                        <div class="calendar-weekdays">
                                            <div class="weekday">Sun</div>
                                            <div class="weekday">Mon</div>
                                            <div class="weekday">Tue</div>
                                            <div class="weekday">Wed</div>
                                            <div class="weekday">Thu</div>
                                            <div class="weekday">Fri</div>
                                            <div class="weekday">Sat</div>
                                        </div>
                                        <div class="calendar-days" id="calendar-days">
                                            <!-- Calendar days will be generated by JavaScript -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Quick Stats Widget -->
                            <div class="widget stats-widget">
                                <h4><i class="fas fa-chart-bar"></i> Blog Stats</h4>
                                <div class="stats-list">
                                    <div class="stat-item">
                                        <span class="stat-label">Total Posts</span>
                                        <span class="stat-value" id="total-posts">0</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">This Month</span>
                                        <span class="stat-value" id="this-month-posts">0</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">Categories</span>
                                        <span class="stat-value" id="total-categories">4</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">Tags</span>
                                        <span class="stat-value" id="total-tags">0</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Recent Comments Widget -->
                            <div class="widget comments-widget">
                                <h4><i class="fas fa-comments"></i> Recent Activity</h4>
                                <div class="activity-list" id="activity-list">
                                    <div class="empty-activity">
                                        <p class="text-muted">No recent activity</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Write Blog Modal -->
        <div class="modal fade" id="writeBlogModal" tabindex="-1" aria-labelledby="writeBlogModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="writeBlogModalLabel">
                            <i class="fas fa-pen"></i> Write New Blog Post
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="blogForm">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="mb-3">
                                        <label for="blogTitle" class="form-label">Title *</label>
                                        <input type="text" class="form-control" id="blogTitle" placeholder="Enter your blog post title" required>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="blogExcerpt" class="form-label">Excerpt</label>
                                        <textarea class="form-control" id="blogExcerpt" rows="2" placeholder="Brief description of your post (optional)"></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="blogContent" class="form-label">Content *</label>
                                        <div class="editor-toolbar">
                                            <button type="button" class="btn btn-sm btn-outline-secondary" onclick="formatText('bold')">
                                                <i class="fas fa-bold"></i>
                                            </button>
                                            <button type="button" class="btn btn-sm btn-outline-secondary" onclick="formatText('italic')">
                                                <i class="fas fa-italic"></i>
                                            </button>
                                            <button type="button" class="btn btn-sm btn-outline-secondary" onclick="formatText('underline')">
                                                <i class="fas fa-underline"></i>
                                            </button>
                                            <button type="button" class="btn btn-sm btn-outline-secondary" onclick="insertLink()">
                                                <i class="fas fa-link"></i>
                                            </button>
                                            <button type="button" class="btn btn-sm btn-outline-secondary" onclick="insertList()">
                                                <i class="fas fa-list"></i>
                                            </button>
                                        </div>
                                        <div class="editor-container">
                                            <div class="editor-content" id="blogContent" contenteditable="true" placeholder="Write your blog post content here..."></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label for="blogCategory" class="form-label">Category</label>
                                        <select class="form-select" id="blogCategory">
                                            <option value="technology">Technology</option>
                                            <option value="research">Research</option>
                                            <option value="sports">Sports Science</option>
                                            <option value="tutorials">Tutorials</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="blogTags" class="form-label">Tags</label>
                                        <input type="text" class="form-control" id="blogTags" placeholder="Enter tags separated by commas">
                                        <small class="form-text text-muted">e.g., biomechanics, AI, research</small>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Publish Options</label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="publishNow" checked>
                                            <label class="form-check-label" for="publishNow">
                                                Publish immediately
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="allowComments" checked>
                                            <label class="form-check-label" for="allowComments">
                                                Allow comments
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Preview</label>
                                        <div class="blog-preview" id="blogPreview">
                                            <h6>Your post will appear here...</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-outline-primary" onclick="saveDraft()">Save Draft</button>
                        <button type="button" class="btn btn-primary" onclick="publishBlog()">
                            <i class="fas fa-paper-plane"></i> Publish Post
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        
        <!-- Theme Toggle and Language Switch JavaScript -->
        <script>
            // Check for saved preferences
            const currentTheme = localStorage.getItem('theme') || 'light';
            const currentLang = localStorage.getItem('language') || 'en';
            
            document.documentElement.setAttribute('data-theme', currentTheme);
            document.documentElement.setAttribute('data-lang', currentLang);
            
            // Update theme icon based on current theme
            function updateThemeIcon() {
                const themeIcon = document.getElementById('theme-icon');
                const currentTheme = document.documentElement.getAttribute('data-theme');
                
                if (currentTheme === 'dark') {
                    themeIcon.className = 'fas fa-sun';
                    themeIcon.style.color = '#ffc107';
                } else {
                    themeIcon.className = 'fas fa-moon';
                    themeIcon.style.color = '#007bff';
                }
            }
            
            // Update language text
            function updateLanguageText() {
                const langText = document.getElementById('lang-text');
                const currentLang = document.documentElement.getAttribute('data-lang');
                
                langText.textContent = currentLang === 'en' ? '中' : 'EN';
            }
            
            // Toggle theme function
            function toggleTheme() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateThemeIcon();
                
                // Add visual feedback
                const themeBtn = document.getElementById('theme-toggle-btn');
                themeBtn.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    themeBtn.style.transform = '';
                }, 150);
            }
            
            // Toggle language function
            function toggleLanguage() {
                const currentLang = document.documentElement.getAttribute('data-lang');
                const newLang = currentLang === 'en' ? 'zh' : 'en';
                
                document.documentElement.setAttribute('data-lang', newLang);
                localStorage.setItem('language', newLang);
                updateLanguageText();
                updatePageLanguage(newLang);
                
                // Add visual feedback
                const langBtn = document.getElementById('lang-toggle-btn');
                langBtn.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    langBtn.style.transform = '';
                }, 150);
            }
            
            // Update page content based on language
            function updatePageLanguage(lang) {
                const elements = document.querySelectorAll('[data-en][data-zh]');
                
                elements.forEach(element => {
                    const enText = element.getAttribute('data-en');
                    const zhText = element.getAttribute('data-zh');
                    
                    if (lang === 'zh' && zhText) {
                        // For buttons with spans, update the span content
                        const span = element.querySelector('span');
                        if (span) {
                            span.textContent = zhText;
                        } else {
                            element.textContent = zhText;
                        }
                    } else if (lang === 'en' && enText) {
                        // For buttons with spans, update the span content
                        const span = element.querySelector('span');
                        if (span) {
                            span.textContent = enText;
                        } else {
                            element.textContent = enText;
                        }
                    }
                });
                
                // Update page title
                if (lang === 'zh') {
                    document.title = 'Tian - 博客文章';
                } else {
                    document.title = 'Tian - Blog Posts';
                }
            }
            
            document.addEventListener('DOMContentLoaded', function() {
                updateThemeIcon();
                updateLanguageText();
                updatePageLanguage(currentLang);
                initializeTimeAndCalendar();
                initializeBlogEditor();
            });
        </script>
        
        <!-- Time and Calendar JavaScript -->
        <script>
            let currentDate = new Date();
            
            function initializeTimeAndCalendar() {
                updateTime();
                generateCalendar();
                
                // Update time every second
                setInterval(updateTime, 1000);
                
                // Calendar navigation
                document.getElementById('prev-month').addEventListener('click', function() {
                    currentDate.setMonth(currentDate.getMonth() - 1);
                    generateCalendar();
                });
                
                document.getElementById('next-month').addEventListener('click', function() {
                    currentDate.setMonth(currentDate.getMonth() + 1);
                    generateCalendar();
                });
            }
            
            function updateTime() {
                const now = new Date();
                
                // Format time
                const timeOptions = {
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                };
                const timeString = now.toLocaleTimeString('en-US', timeOptions);
                
                // Format date
                const dateOptions = {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                };
                const dateString = now.toLocaleDateString('en-US', dateOptions);
                
                // Get timezone
                const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                
                // Update DOM
                document.getElementById('current-time').textContent = timeString;
                document.getElementById('current-date').textContent = dateString;
                document.getElementById('timezone').textContent = timezone;
            }
            
            function generateCalendar() {
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();
                const today = new Date();
                
                // Update calendar title
                const monthNames = [
                    'January', 'February', 'March', 'April', 'May', 'June',
                    'July', 'August', 'September', 'October', 'November', 'December'
                ];
                document.getElementById('calendar-title').textContent = `${monthNames[month]} ${year}`;
                
                // Get first day of month and number of days
                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const daysInPrevMonth = new Date(year, month, 0).getDate();
                
                const calendarDays = document.getElementById('calendar-days');
                calendarDays.innerHTML = '';
                
                // Add previous month's trailing days
                for (let i = firstDay - 1; i >= 0; i--) {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day prev-month';
                    dayElement.textContent = daysInPrevMonth - i;
                    calendarDays.appendChild(dayElement);
                }
                
                // Add current month's days
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day';
                    dayElement.textContent = day;
                    
                    // Highlight today
                    if (year === today.getFullYear() && 
                        month === today.getMonth() && 
                        day === today.getDate()) {
                        dayElement.classList.add('today');
                    }
                    
                    // Add click event for day selection
                    dayElement.addEventListener('click', function() {
                        // Remove previous selection
                        document.querySelectorAll('.calendar-day.selected').forEach(el => {
                            el.classList.remove('selected');
                        });
                        // Add selection to clicked day
                        this.classList.add('selected');
                    });
                    
                    calendarDays.appendChild(dayElement);
                }
                
                // Add next month's leading days
                const totalCells = calendarDays.children.length;
                const remainingCells = 42 - totalCells; // 6 rows × 7 days = 42 cells
                for (let day = 1; day <= remainingCells; day++) {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day next-month';
                    dayElement.textContent = day;
                    calendarDays.appendChild(dayElement);
                }
            }
        </script>
        
        <!-- Blog Editor JavaScript -->
        <script>
            let blogPosts = JSON.parse(localStorage.getItem('blogPosts')) || [];
            
            function initializeBlogEditor() {
                // Initialize editor events
                const blogContent = document.getElementById('blogContent');
                const blogTitle = document.getElementById('blogTitle');
                const blogExcerpt = document.getElementById('blogExcerpt');
                
                // Real-time preview update
                [blogTitle, blogExcerpt, blogContent].forEach(element => {
                    element.addEventListener('input', updatePreview);
                });
                
                // Load existing posts
                loadBlogPosts();
            }
            
            function openWriteBlogModal() {
                const modal = new bootstrap.Modal(document.getElementById('writeBlogModal'));
                modal.show();
                
                // Clear form
                document.getElementById('blogForm').reset();
                document.getElementById('blogContent').innerHTML = '';
                updatePreview();
            }
            
            function updatePreview() {
                const title = document.getElementById('blogTitle').value;
                const excerpt = document.getElementById('blogExcerpt').value;
                const content = document.getElementById('blogContent').innerHTML;
                const category = document.getElementById('blogCategory').value;
                
                const preview = document.getElementById('blogPreview');
                
                if (title || excerpt || content) {
                    const previewContent = `
                        <div class="preview-post">
                            <h6>${title || 'Untitled Post'}</h6>
                            <p class="preview-meta">
                                <small class="text-muted">
                                    <i class="fas fa-calendar"></i> ${new Date().toLocaleDateString()}
                                    <i class="fas fa-folder ms-2"></i> ${category}
                                </small>
                            </p>
                            <p class="preview-excerpt">${excerpt || content.substring(0, 100) + '...'}</p>
                        </div>
                    `;
                    preview.innerHTML = previewContent;
                } else {
                    preview.innerHTML = '<h6>Your post will appear here...</h6>';
                }
            }
            
            function formatText(command) {
                document.execCommand(command, false, null);
                document.getElementById('blogContent').focus();
            }
            
            function insertLink() {
                const url = prompt('Enter URL:');
                if (url) {
                    document.execCommand('createLink', false, url);
                }
                document.getElementById('blogContent').focus();
            }
            
            function insertList() {
                document.execCommand('insertUnorderedList', false, null);
                document.getElementById('blogContent').focus();
            }
            
            function saveDraft() {
                const blogData = getBlogFormData();
                blogData.status = 'draft';
                blogData.id = Date.now();
                
                // Save to localStorage
                let drafts = JSON.parse(localStorage.getItem('blogDrafts')) || [];
                drafts.push(blogData);
                localStorage.setItem('blogDrafts', JSON.stringify(drafts));
                
                // Show success message
                showNotification('Draft saved successfully!', 'success');
                
                // Close modal
                bootstrap.Modal.getInstance(document.getElementById('writeBlogModal')).hide();
            }
            
            function publishBlog() {
                const blogData = getBlogFormData();
                
                // Validate required fields
                if (!blogData.title.trim() || !blogData.content.trim()) {
                    showNotification('Please fill in the title and content fields.', 'error');
                    return;
                }
                
                blogData.status = 'published';
                blogData.id = Date.now();
                blogData.publishDate = new Date().toISOString();
                
                // Add to blog posts
                blogPosts.unshift(blogData);
                localStorage.setItem('blogPosts', JSON.stringify(blogPosts));
                
                // Add to page
                addBlogPostToPage(blogData);
                
                // Update stats
                updateBlogStats();
                
                // Show success message
                showNotification('Blog post published successfully!', 'success');
                
                // Close modal
                bootstrap.Modal.getInstance(document.getElementById('writeBlogModal')).hide();
                
                // Clear form
                document.getElementById('blogForm').reset();
                document.getElementById('blogContent').innerHTML = '';
            }
            
            function getBlogFormData() {
                return {
                    title: document.getElementById('blogTitle').value,
                    excerpt: document.getElementById('blogExcerpt').value,
                    content: document.getElementById('blogContent').innerHTML,
                    category: document.getElementById('blogCategory').value,
                    tags: document.getElementById('blogTags').value.split(',').map(tag => tag.trim()).filter(tag => tag),
                    publishNow: document.getElementById('publishNow').checked,
                    allowComments: document.getElementById('allowComments').checked,
                    createdAt: new Date().toISOString()
                };
            }
            
            function addBlogPostToPage(blogData) {
                const blogList = document.querySelector('.blog-list');
                
                // Remove empty state if it exists
                const emptyState = blogList.querySelector('.empty-state');
                if (emptyState) {
                    emptyState.remove();
                }
                
                const blogItem = document.createElement('div');
                blogItem.className = 'blog-item';
                blogItem.setAttribute('data-id', blogData.id);
                
                const publishDate = new Date(blogData.publishDate || blogData.createdAt);
                const excerpt = blogData.excerpt || blogData.content.replace(/<[^>]*>/g, '').substring(0, 150) + '...';
                
                blogItem.innerHTML = `
                    <div class="blog-item-header">
                        <h3><a href="#" onclick="viewBlogPost(${blogData.id})">${blogData.title}</a></h3>
                        <div class="blog-actions-small">
                            <button class="btn btn-sm btn-outline-primary" onclick="editBlogPost(${blogData.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteBlogPost(${blogData.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <p class="blog-meta">
                        ${publishDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
                        <span class="category-badge">${blogData.category}</span>
                    </p>
                    <p class="excerpt">${excerpt}</p>
                    <div class="blog-tags">
                        ${blogData.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                    <a href="#" class="read-more" onclick="viewBlogPost(${blogData.id})">Read more →</a>
                `;
                
                blogList.insertBefore(blogItem, blogList.firstChild);
            }
            
            function loadBlogPosts() {
                const blogList = document.querySelector('.blog-list');
                
                // Clear existing posts except the default ones (keep them for demo)
                // In a real implementation, you might want to load all from storage
                
                blogPosts.forEach(blogData => {
                    addBlogPostToPage(blogData);
                });
                
                updateBlogStats();
            }
            
            function updateBlogStats() {
                const totalPosts = blogPosts.length;
                const thisMonth = blogPosts.filter(post => {
                    const postDate = new Date(post.publishDate || post.createdAt);
                    const now = new Date();
                    return postDate.getMonth() === now.getMonth() && postDate.getFullYear() === now.getFullYear();
                }).length;
                
                // Count unique tags
                const allTags = blogPosts.flatMap(post => post.tags || []);
                const uniqueTags = [...new Set(allTags)].length;
                
                // Update stats in sidebar
                document.getElementById('total-posts').textContent = totalPosts;
                document.getElementById('this-month-posts').textContent = thisMonth;
                document.getElementById('total-tags').textContent = uniqueTags;
            }
            
            function viewBlogPost(id) {
                const post = blogPosts.find(p => p.id === id);
                if (post) {
                    // Create a simple blog post view modal
                    const viewModal = document.createElement('div');
                    viewModal.className = 'modal fade';
                    viewModal.innerHTML = `
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">${post.title}</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                </div>
                                <div class="modal-body">
                                    <p class="text-muted mb-3">
                                        <i class="fas fa-calendar"></i> ${new Date(post.publishDate || post.createdAt).toLocaleDateString()}
                                        <i class="fas fa-folder ms-3"></i> ${post.category}
                                    </p>
                                    <div class="blog-content">${post.content}</div>
                                    <div class="blog-tags mt-3">
                                        ${post.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(viewModal);
                    const modal = new bootstrap.Modal(viewModal);
                    modal.show();
                    
                    // Remove modal after hiding
                    viewModal.addEventListener('hidden.bs.modal', () => {
                        document.body.removeChild(viewModal);
                    });
                }
            }
            
            function editBlogPost(id) {
                const post = blogPosts.find(p => p.id === id);
                if (post) {
                    // Fill form with existing data
                    document.getElementById('blogTitle').value = post.title;
                    document.getElementById('blogExcerpt').value = post.excerpt || '';
                    document.getElementById('blogContent').innerHTML = post.content;
                    document.getElementById('blogCategory').value = post.category;
                    document.getElementById('blogTags').value = post.tags.join(', ');
                    document.getElementById('publishNow').checked = post.publishNow;
                    document.getElementById('allowComments').checked = post.allowComments;
                    
                    // Store editing ID
                    document.getElementById('blogForm').setAttribute('data-editing-id', id);
                    
                    // Open modal
                    const modal = new bootstrap.Modal(document.getElementById('writeBlogModal'));
                    modal.show();
                    
                    updatePreview();
                }
            }
            
            function deleteBlogPost(id) {
                if (confirm('Are you sure you want to delete this blog post?')) {
                    // Remove from array
                    blogPosts = blogPosts.filter(p => p.id !== id);
                    localStorage.setItem('blogPosts', JSON.stringify(blogPosts));
                    
                    // Remove from page
                    const blogItem = document.querySelector(`[data-id="${id}"]`);
                    if (blogItem) {
                        blogItem.remove();
                    }
                    
                    // Show empty state if no posts left
                    const blogList = document.querySelector('.blog-list');
                    if (blogPosts.length === 0 && !blogList.querySelector('.empty-state')) {
                        blogList.innerHTML = `
                            <div class="empty-state">
                                <div class="empty-icon">
                                    <i class="fas fa-pen-fancy"></i>
                                </div>
                                <h4>No blog posts yet</h4>
                                <p>Start writing your first blog post by clicking the "Write New Post" button above.</p>
                            </div>
                        `;
                    }
                    
                    updateBlogStats();
                    showNotification('Blog post deleted successfully!', 'success');
                }
            }
            
            function showNotification(message, type = 'info') {
                // Create notification element
                const notification = document.createElement('div');
                notification.className = `alert alert-${type === 'error' ? 'danger' : type} notification-toast`;
                notification.innerHTML = `
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    ${message}
                `;
                
                // Add to page
                document.body.appendChild(notification);
                
                // Show with animation
                setTimeout(() => notification.classList.add('show'), 100);
                
                // Remove after 3 seconds
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => document.body.removeChild(notification), 300);
                }, 3000);
            }
        </script>
    </body>
</html> 